<nav class="navbar navbar-expand-lg fixed-top navbar-transparent" color-on-scroll="100" id="navbar-top">
    <div class="container">
        <div class="navbar-translate">
            <a class="navbar-brand" placement="bottom" [routerLink]="['/home']" target="_blank"
                tooltip="Designed and Coded by Creative Tim">
                <span> BLK• </span> Design System Angular
            </a>
            <button aria-controls="navigation-index" aria-label="Toggle navigation"
                class="navbar-toggler navbar-toggler" [attr.aria-expanded]="!isCollapsed"
                (click)="isCollapsed = !isCollapsed" id="navigation" type="button">
                <span class="navbar-toggler-bar bar1"> </span>
                <span class="navbar-toggler-bar bar2"> </span>
                <span class="navbar-toggler-bar bar3"> </span>
            </button>
        </div>
        <div class="navbar-collapse justify-content-end" [collapse]="isCollapsed" id="navigation">
            <div class="navbar-collapse-header">
                <div class="row">
                    <div class="col-6 collapse-brand"><a> BLK• </a></div>
                    <div class="col-6 collapse-close text-right">
                        <button aria-controls="navigation-index" aria-label="Toggle navigation" class="navbar-toggler"
                            [attr.aria-expanded]="!isCollapsed" (click)="isCollapsed = !isCollapsed" id="navigation"
                            type="button">
                            <i class="tim-icons icon-simple-remove"> </i>
                        </button>
                    </div>
                </div>
            </div>
            <ul class="navbar-nav">
                <li class="nav-item p-0">
                    <a class="nav-link" href="https://twitter.com/CreativeTim" placement="bottom" target="_blank"
                        tooltip="Follow us on Twitter">
                        <i class="fab fa-twitter"> </i>
                        <p class="d-lg-none d-xl-none">Twitter</p>
                    </a>
                </li>
                <li class="nav-item p-0">
                    <a class="nav-link" href="https://www.facebook.com/CreativeTim" placement="bottom" target="_blank"
                        tooltip="Like us on Facebook">
                        <i class="fab fa-facebook-square"> </i>
                        <p class="d-lg-none d-xl-none">Facebook</p>
                    </a>
                </li>
                <li class="nav-item p-0">
                    <a class="nav-link" href="https://www.instagram.com/CreativeTimOfficial" placement="bottom"
                        target="_blank" tooltip="Follow us on Instagram">
                        <i class="fab fa-instagram"> </i>
                        <p class="d-lg-none d-xl-none">Instagram</p>
                    </a>
                </li>
                <li class="dropdown nav-item" dropdown>
                    <a class="dropdown-toggle nav-link dropdown-toggle" data-toggle="dropdown" dropdownToggle
                        href="javascript:void(0)">
                        <i class="fa fa-cogs d-lg-none d-xl-none"> </i> Getting started
                    </a>
                    <div class="dropdown-menu dropdown-with-icons" *dropdownMenu>
                        <a class="dropdown-item"
                            href="https://demos.creative-tim.com/blk-design-system-angular/#/documentation/overview">
                            <i class="tim-icons icon-paper"> </i> Documentation
                        </a>
                        <a class="dropdown-item" [routerLink]="['/register']">
                            <i class="tim-icons icon-bullet-list-67"> </i> Register Page
                        </a>
                        <a class="dropdown-item" [routerLink]="['/landing']">
                            <i class="tim-icons icon-image-02"> </i> Landing Page
                        </a>
                        <a class="dropdown-item" [routerLink]="['/profile']">
                            <i class="tim-icons icon-single-02"> </i> Profile Page
                        </a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</nav>
<div class="wrapper">
    <div class="page-header header-filter">
        <div class="squares square1"></div>
        <div class="squares square2"></div>
        <div class="squares square3"></div>
        <div class="squares square4"></div>
        <div class="squares square5"></div>
        <div class="squares square6"></div>
        <div class="squares square7"></div>

        <div class="container">
            <div class="loading-overlay" [hidden]="!isLoading">
                <div class="loading-spinner"></div>
            </div>

            <div class="content-center">
                <div class="form-row" *ngFor="let item of this.searchCityState;index as ii">
                    <ng-container *ngIf="item.plan=='';else planed">
                        <div class="form-group col-md-5">
                            <label [for]="'inputCity'+ii">城市</label>
                            <select [id]="'inputCity'+ii" class="form-control" [(ngModel)]="item.selectCity">
                                <option value="-1">隨機</option>
                                <option *ngFor="let citem of this.cityState;index as i" [value]="i">{{citem.cnName}}
                                </option>
                            </select>
                        </div>
                        <div class="form-group col-md-5">
                            <label [for]="'inputState'+ii">鄉鎮</label>
                            <select [id]="'inputState'+ii" class="form-control" [(ngModel)]="item.selectSate">
                                <option value="-1">隨機</option>
                                <ng-container *ngIf="item.selectCity!=-1">
                                    <option *ngFor="let sitem of this.cityState[item.selectCity].State;index as j"
                                        [value]="j">
                                        {{sitem.cnName}}
                                    </option>
                                </ng-container>
                            </select>
                        </div>

                        <div *ngIf="item.searchPos=='';else selectAF" class="form-group col-md-10">
                            <button (click)="searchLocalPlaces()" type="submit" class="btn btn-primary">搜尋景點</button>
                        </div>

                        <ng-template #selectAF>
                            <div class="form-group col-md-10">
                                <div *ngFor="let titem of trans" class="form-check form-check-radio form-check-inline">
                                    <label class="form-check-label">
                                        <input class="form-check-input" type="radio" id="{{ titem }}" name="{{titem}}"
                                            [value]="titem" [(ngModel)]="item.trans"
                                            (ngModelChange)="item.trans=$event">
                                        {{titem}}
                                        <span class="form-check-sign"></span>
                                    </label>
                                </div>
                            </div>
                            <div class="form-group col-md-5">選擇{{item.searchPos}}景點</div>
                            <div class="form-group col-md-5">選擇{{item.searchPos}}美食</div>

                            <div class="form-group col-md-5">
                                <div class="form-check">
                                    <label class="form-check-label">
                                        <input [(ngModel)]="item.isAttractionsRandom" class="form-check-input"
                                            type="checkbox">
                                        隨機景點
                                        <span class="form-check-sign">
                                            <span class="check"></span>
                                        </span>
                                    </label>
                                </div>
                            </div>

                            <div class="form-group col-md-5">
                                <div class="form-check">
                                    <label class="form-check-label">
                                        <input [(ngModel)]="item.isFoodRandom" class="form-check-input" type="checkbox">
                                        隨機美食
                                        <span class="form-check-sign">
                                            <span class="check"></span>
                                        </span>
                                    </label>
                                </div>
                            </div>

                            <div class="form-group col-md-5" style="height: 300px;overflow-y: auto;">
                                <table class="table" *ngIf="attractionsInf.hasOwnProperty(item.searchPos)">
                                    <thead>
                                        <tr>
                                            <th class="text-center">Checked</th>
                                            <th>Name</th>
                                            <th class="text-right">Stars</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let aitem of attractionsInf[item.searchPos].results;index as ai">
                                            <td class="text-center">
                                                <input
                                                    [disabled]="item.isAttractionsRandom || (getCheckedCount(attractionsInf[item.searchPos].results)&&!aitem.checked)"
                                                    [(ngModel)]="aitem.checked" class="form-check-input"
                                                    type="checkbox">
                                            </td>
                                            <td class="text-left">
                                                <button class="btn btn-default btn-sm mr-1" container="body"
                                                    placement="bottom" [popoverTitle]="aitem.name"
                                                    [popover]="aitem.formatted_address" type="button">
                                                    {{aitem.name}}
                                                </button>
                                            </td>
                                            <td>
                                                {{aitem.rating}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="td-actions text-center" colspan="3">
                                                <button (click)="onAttractionsScroll(item.searchPos)" type="button"
                                                    class="btn btn-success btn-sm">加載更多資訊...</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div class="form-group col-md-5" style="height: 300px;overflow-y: auto;">
                                <table class="table" *ngIf="foodInf.hasOwnProperty(item.searchPos)">
                                    <thead>
                                        <tr>
                                            <th class="text-center">Checked</th>
                                            <th>Name</th>
                                            <th class="text-right">Stars</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let fitem of foodInf[item.searchPos].results;index as ai">
                                            <td class="text-center">
                                                <input
                                                    [disabled]="item.isFoodRandom|| (getCheckedCount(foodInf[item.searchPos].results)&&!fitem.checked)"
                                                    [(ngModel)]="fitem.checked" class="form-check-input"
                                                    type="checkbox">
                                            </td>
                                            <td class="text-left">
                                                <button class="btn btn-default btn-sm mr-1" container="body"
                                                    placement="bottom" [popoverTitle]="fitem.name"
                                                    [popover]="fitem.formatted_address" type="button">
                                                    {{fitem.name}}
                                                </button>
                                            </td>
                                            <td>
                                                {{fitem.rating}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="td-actions text-center" colspan="3">
                                                <button (click)="onFoodsScroll(item.searchPos)" type="button"
                                                    class="btn btn-success btn-sm">加載更多資訊...</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <button (click)="tranvePlan(item.searchPos)" type="submit"
                                class="btn btn-primary form-group col-md-10">產生第{{ii+1}}天行程</button>
                        </ng-template>
                    </ng-container>
                    <ng-template #planed>

                    </ng-template>
                </div>
                <div class="form-row" *ngIf="exportPlanDoc!=''">

                    <ng-container *ngIf="!isExportPlan;else export">
                        <div class="form-group col-md-10">
                            <angular-editor [(ngModel)]="exportPlanDoc" [config]="config"></angular-editor>
                        </div>
                        <div class="form-group col-md-5"><button (click)="addCityState()" type="submit"
                                class="btn btn-primary">添加新行程</button>
                        </div>
                        <div class="form-group col-md-5"><button (click)="exportPlan()" type="submit"
                                class="btn btn-primary">匯出行程</button>
                        </div>
                    </ng-container>
                    <ng-template #export>
                        <div class="form-group col-md-10">
                            <div class="text-pre" [innerHtml]="exportPlanDoc|safeHtml"></div>
                        </div>

                        <div class="form-group col-md-5">
                            <label class="form-check-label">
                                若要儲存形成請先登入google帳號
                            </label>

                            <button *ngIf="LoginService.loggedIn;else login" (click)="storePlan()" type="submit"
                                class="btn btn-primary">儲存</button>
                            <ng-template #login>
                                <asl-google-signin-button type='standard' size='large'></asl-google-signin-button>
                            </ng-template>
                        </div>
                        <div class="form-group col-md-5">
                            <button (click)="exportPlan()" type="submit" class="btn btn-primary">匯出pdf</button>
                        </div>

                    </ng-template>
                </div>

                <!-- <div class="form-row">
                    <div class="form-group col-md-4">
                        <label for="inputTime">旅遊期間</label>
                        <input [(ngModel)]="dateRange" id="inputTime" type="text" placeholder="Daterangepicker"
                            class="form-control" bsDaterangepicker
                            [bsConfig]="{ isAnimated: true, containerClass: 'theme-red' }">
                    </div>
                </div> -->
            </div>
        </div>
    </div>
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-3">
                    <h1 class="title">BLK•</h1>
                </div>
                <div class="col-md-3">
                    <ul class="nav">
                        <li class="nav-item">
                            <a class="nav-link" [routerLink]="['/home']"> Home </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" [routerLink]="['/landing']"> Landing </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" [routerLink]="['/register']"> Register </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" [routerLink]="['/profile']"> Profile </a>
                        </li>
                    </ul>
                </div>
                <div class="col-md-3">
                    <ul class="nav">
                        <li class="nav-item">
                            <a class="nav-link" href="https://creative-tim.com/contact-us?ref=blkdsa-footer">
                                Contact Us
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://creative-tim.com/about-us?ref=blkdsa-footer">
                                About Us
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://creative-tim.com/blog?ref=blkdsa-footer">
                                Blog
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://opensource.org/licenses/MIT">
                                License
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="col-md-3">
                    <h3 class="title">Follow us:</h3>
                    <div class="btn-wrapper profile">
                        <a class="btn btn-icon btn-neutral btn-round btn-simple mr-1"
                            href="https://twitter.com/creativetim" target="_blank">
                            <i class="fab fa-twitter"> </i>
                        </a>
                        <a class="btn btn-icon btn-neutral btn-round btn-simple mr-1"
                            href="https://www.facebook.com/creativetim" target="_blank">
                            <i class="fab fa-facebook-square"> </i>
                        </a>
                        <a class="btn btn-icon btn-neutral btn-round btn-simple" href="https://dribbble.com/creativetim"
                            target="_blank">
                            <i class="fab fa-dribbble"> </i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
</div>